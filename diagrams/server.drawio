<mxfile host="65bd71144e">
    <diagram id="3dqU6impjqxLbrSppdJr" name="Page-1">
        <mxGraphModel dx="722" dy="659" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="raspberry pi - ubuntu" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="40" y="161" width="350" height="470" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="server layer" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="60" y="191" width="310" height="420" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="kubernetes" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="70" y="221" width="140" height="380" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="loadbalancer&lt;div&gt;metallb&lt;/div&gt;&lt;div&gt;public endpoints&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="391" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="container&lt;div&gt;grafana&lt;/div&gt;&lt;div&gt;monitoring&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="531" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="namespace&lt;div&gt;8bsl dev/test/prod&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="251" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;ingress controller&lt;/font&gt;&lt;/div&gt;&lt;div&gt;nginx&lt;/div&gt;&lt;div&gt;external ip via metallb&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="461" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;CNI&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;flannel&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;cluster networking&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="321" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="Docker&lt;div&gt;container runtime&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="241" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="Ansible&lt;div&gt;server config&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="311" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="iptables&lt;div&gt;k8s networking&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="381" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="github runner&lt;div&gt;ci/cd&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="451" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="dhcp&lt;div&gt;issue ips to nodes&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="521" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="&lt;div&gt;monitoring&lt;/div&gt;grafana&lt;div&gt;cluster observability&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="440" y="171" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="&lt;div&gt;source control&lt;/div&gt;github&lt;div&gt;ci/cd, source control&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="440" y="251" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="18" value="&lt;div&gt;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;network&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;lan switch&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;ethernet comms&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="440" y="331" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="The server layer initialises and maintains the infrastructure running the 8bsl. There are some scripts to initialise raspberry pis to act as a bare metal cluster and ansible playbooks to configure container runtime, networking, kubernetes, cicd, monitoring etc.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Essentially a master and two worker nodes are configured on three raspberry pis with a fourth acting as a deployment host with ansible and a github actions runner configured. Kubernetes has a basic flannel CNI configured and dev/prod namespaces with grafana containers handling monitoring. Metallb and nginx ingress handle communication from outside the cluster and ssh is configured to allow deployment host ansible connection to the cluster pis and windows PC&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=left;" vertex="1" parent="1">
                    <mxGeometry x="40" y="10" width="680" height="120" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>